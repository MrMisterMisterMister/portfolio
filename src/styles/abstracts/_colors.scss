// ============================================================================
// COLOR SYSTEM
// ============================================================================
// Modern, vibrant color system with comprehensive light and dark mode support.
// Uses CSS custom properties for runtime theme switching and HSL color space
// for better color manipulation.
//
// @layer: Abstracts - Settings only, no CSS output (except CSS custom props)
// @category: Color Tokens
// ============================================================================

@use "sass:map";
@use "sass:meta";
@use "sass:color";

// ============================================================================
// CSS CUSTOM PROPERTIES (ROOT LEVEL)
// ============================================================================
// These CSS variables are applied at runtime and can be switched dynamically
// for theme changes. All color values use HSL (Hue, Saturation, Lightness)
// format for better readability and manipulation.
// ============================================================================

:root {
    // ------------------------------------------------------------------------
    // LIGHT MODE - Soft blue palette with WCAG AA compliance
    // ------------------------------------------------------------------------

    // Base colors - Soft blue background
    --background: 210 40% 98%;         // #F7FAFE - Soft light blue background
    --foreground: 222 84% 5%;          // #020617 - Very dark slate text (20.1:1 ratio)

    // Surface colors (cards, panels, etc.)
    --card: 210 40% 99%;               // #FBFDFF - Very light blue for cards
    --card-foreground: 222 84% 5%;     // #020617 - Very dark text on cards (20.8:1 ratio)

    // Popover colors
    --popover: 210 40% 99%;            // #FBFDFF - Light blue popover
    --popover-foreground: 222 84% 5%;  // #020617 - Dark popover text (20.8:1 ratio)

    // Primary brand color - Vibrant blue
    --primary: 217 91% 45%;            // #1D4ED8 - Vibrant blue (4.66:1 ratio on light blue)
    --primary-foreground: 0 0% 100%;   // #FFFFFF - White text on primary (10.37:1 ratio)
    --primary-hover: 217 91% 38%;      // #1A42C3 - Darker vibrant blue for hover (better contrast)
    --primary-active: 217 91% 35%;     // #1739AB - Even darker for active state

    // Secondary/subtle colors - Blue-gray harmony
    --secondary: 210 30% 88%;          // #D7E3F0 - Light blue-gray
    --secondary-foreground: 222 84% 5%; // #020617 - Dark text on secondary (14.8:1 ratio)
    --secondary-hover: 210 30% 82%;    // #C5D6E8 - Darker for hover
    --secondary-active: 210 30% 78%;   // #B8CCDF - Even darker for active

    // Muted/subdued colors - Subtle blue-gray
    --muted: 210 35% 94%;              // #EBF3FB - Very light blue-gray
    --muted-foreground: 215 25% 27%;   // #364152 - Dark muted text (7.5:1 ratio)

    // Accent colors - Slightly saturated blue
    --accent: 210 40% 96%;             // #F0F7FE - Accent light blue
    --accent-foreground: 222 84% 5%;   // #020617 - Dark text on accent (19.2:1 ratio)
    --accent-hover: 210 40% 92%;       // #E0EFFC - Darker for hover
    --accent-active: 210 40% 88%;      // #D0E7FA - Even darker for active

    // Destructive/error colors
    --destructive: 0 72% 51%;          // #DC2626 - Red (4.54:1 ratio)
    --destructive-foreground: 0 0% 100%; // #FFFFFF - White text on red (5.9:1 ratio)
    --destructive-hover: 0 72% 44%;    // #C71F1F - Darker red for hover
    --destructive-active: 0 72% 40%;   // #B31B1B - Even darker for active

    // Border and input colors - Blue-gray borders
    --border: 210 30% 80%;             // #C1D4E8 - Blue-gray borders (2.8:1 ratio)
    --input: 210 30% 80%;              // #C1D4E8 - Input borders (2.8:1 ratio)
    --ring: 217 91% 45%;               // #1D4ED8 - Focus ring (matches primary)

    // Border radius (global setting)
    --radius: 0.5rem;                  // 8px - Base border radius

    // Terminal colors
    --terminal-bg: 210 40% 98%;            /* very light panel background (HSL) */
		--terminal-border: 210 40% 90%;        /* light border color */
    --terminal-foreground: 222 10% 12%;    /* dark text for light terminal */
    --terminal-prompt: 120 80% 30%;        /* green prompt (HSL) */
    --terminal-accent: 217 91% 45%;        /* accent/command color (primary) */
    --terminal-title-bg: 210 20% 92%;      /* title bar background (light) */
    --terminal-muted: 210 10% 60%;         /* muted text */
}

.dark {
    // ------------------------------------------------------------------------
    // DARK MODE - WCAG AA compliant (4.5:1 minimum contrast ratio)
    // ------------------------------------------------------------------------

    // Base colors
    --background: 222 84% 5%;          // #020617 - Very dark slate background
    --foreground: 0 0% 98%;            // #FAFAFA - Near white text (19.6:1 ratio)

    // Surface colors
    --card: 217 33% 10%;               // #0F172A - Dark slate cards
    --card-foreground: 0 0% 98%;       // #FAFAFA - Light text on cards (15.8:1 ratio)

    // Popover colors
    --popover: 217 33% 10%;            // #0F172A - Dark popover background
    --popover-foreground: 0 0% 98%;    // #FAFAFA - Light popover text (15.8:1 ratio)

    // Primary brand color (brighter for dark mode)
    --primary: 217 91% 65%;            // #60A5FA - Brighter blue for contrast (9.5:1 ratio)
    --primary-foreground: 0 0% 100%;   // #FFFFFF - White text on primary for readability
    --primary-hover: 217 91% 72%;      // #82B8FF - Lighter brighter blue for hover
    --primary-active: 217 91% 75%;     // #95C5FF - Even lighter for active state

    // Secondary colors
    --secondary: 217 33% 15%;          // #1E293B - Darker slate
    --secondary-foreground: 0 0% 98%;  // #FAFAFA - Light text (12.5:1 ratio)
    --secondary-hover: 217 33% 20%;    // #273548 - Lighter for hover
    --secondary-active: 217 33% 23%;   // #2D3F54 - Even lighter for active

    // Muted colors
    --muted: 217 33% 15%;              // #1E293B - Muted background
    --muted-foreground: 215 20% 65%;   // #94A3B8 - WCAG AA compliant (8.2:1 ratio)

    // Accent colors
    --accent: 217 33% 18%;             // #1E3A5F - Slightly lighter accent
    --accent-foreground: 0 0% 98%;     // #FAFAFA - Light text (13.1:1 ratio)
    --accent-hover: 217 33% 24%;       // #2A4A72 - Lighter for hover
    --accent-active: 217 33% 28%;      // #355784 - Even lighter for active

    // Destructive colors (brighter for visibility)
    --destructive: 0 84% 65%;          // #F87171 - Brighter red (6.7:1 ratio)
    --destructive-foreground: 0 0% 100%; // #FFFFFF - White text on destructive for readability
    --destructive-hover: 0 84% 72%;    // #FF8989 - Lighter for hover
    --destructive-active: 0 84% 75%;   // #FF9A9A - Even lighter for active

    // Border and input colors (more visible)
    --border: 217 33% 30%;             // #334155 - More visible borders (4.3:1 ratio)
    --input: 217 33% 30%;              // #334155 - Input borders (4.3:1 ratio)
    --ring: 217 91% 65%;               // #60A5FA - Focus ring (matches primary)

    // Terminal colors
    --terminal-bg: 220 10% 6%;            /* near-black terminal bg */
		--terminal-border: 220 10% 15%;        /* dark border color */
    --terminal-foreground: 0 0% 90%;      /* light text */
    --terminal-prompt: 156 65% 49%;       /* Windows-style bright green */
    --terminal-prompt-warning: 36 100% 50%;    /* --terminal-prompt-warning */
    --terminal-prompt-error: 0 84% 65%;         /* --terminal-prompt-error */
    --terminal-prompt-info: 217 91% 65%;       /* --terminal-prompt-info */
    --terminal-accent: 217 91% 65%;       /* brighter primary blue in dark */
    --terminal-title-bg: 217 33% 12%;     /* darker title bar */
    --terminal-muted: 215 10% 70%;        /* muted/secondary text */
}

// ============================================================================
// SEMANTIC COLOR TOKENS (SCSS MAP)
// ============================================================================
// These maps allow you to access theme colors in SCSS using helper functions.
// They reference the CSS custom properties defined above.
// ============================================================================

// Semantic theme colors - Main color palette
// @type Map
// @example scss
//   background-color: theme-color(background);
//   color: theme-color(primary);
$theme-colors: (
    background: hsl(var(--background)),
    foreground: hsl(var(--foreground)),
    card: hsl(var(--card)),
    card-foreground: hsl(var(--card-foreground)),
    popover: hsl(var(--popover)),
    popover-foreground: hsl(var(--popover-foreground)),
    primary: hsl(var(--primary)),
    primary-foreground: hsl(var(--primary-foreground)),
    secondary: hsl(var(--secondary)),
    secondary-foreground: hsl(var(--secondary-foreground)),
    muted: hsl(var(--muted)),
    muted-foreground: hsl(var(--muted-foreground)),
    accent: hsl(var(--accent)),
    accent-foreground: hsl(var(--accent-foreground)),
    destructive: hsl(var(--destructive)),
    destructive-foreground: hsl(var(--destructive-foreground)),
    border: hsl(var(--border)),
    input: hsl(var(--input)),
    ring: hsl(var(--ring)),
) !default;

// ============================================================================
// BRAND COLORS (SOCIAL MEDIA & THIRD-PARTY)
// ============================================================================
// Specific brand colors for social media icons and third-party integrations.
// These maintain brand consistency when using external service logos.
// ============================================================================

// Brand-specific colors for social media and third-party services
// @type Map
// @example scss
//   color: brand-color(github);              // #181717
//   color: brand-color(github, hover);       // hsl(0 0% 90%)
//   color: brand-color(linkedin, dark);      // hsl(211 94% 60%)
$brand-colors: (
    // Monochrome
    white: #FFFFFF,
    black: #000000,

    // GitHub
    github: (
        default: #181717,              // GitHub brand black
        light: hsl(0 0% 9%),          // For light backgrounds
        dark: hsl(0 0% 85%),          // For dark backgrounds
        hover: hsl(0 0% 90%),         // Hover state (dark mode)
    ),

    // LinkedIn
    linkedin: (
        default: #0a66c2,              // LinkedIn brand blue
        light: hsl(211 94% 40%),      // For light backgrounds
        dark: hsl(211 94% 60%),       // For dark backgrounds
        hover: hsl(211 94% 50%),      // Hover state
    ),

    // Twitter/X
    twitter: (
        default: #1DA1F2,              // Twitter brand blue
        hover: #1A91DA,                // Hover state
        dark: #1DA1F2,                 // Dark mode
    ),

    // Discord
    discord: (
        default: #5865F2,              // Discord blurple
        light: hsl(235 86% 65%),      // For light backgrounds
        dark: hsl(235 86% 70%),       // For dark backgrounds
        hover: hsl(235 86% 75%),      // Hover state
    ),

    // Email (generic)
    email: (
        default: hsl(217 91% 60%),     // Use primary color
        light: hsl(217 91% 50%),
        dark: hsl(217 91% 60%),
        hover: hsl(217 91% 70%),
    ),
) !default;

// ============================================================================
// OPACITY LEVELS
// ============================================================================
// Standardized opacity values for consistent transparency effects.
// ============================================================================

// Opacity scale for consistent transparency
// @type Map
// @example scss
//   opacity: opacity(subtle);        // 0.05
//   background-color: rgba(0, 0, 0, opacity(moderate)); // 30% opacity
$opacity-levels: (
    transparent: 0,        // Fully transparent
    subtle: 0.05,          // Very subtle (5%)
    light: 0.1,            // Light (10%)
    medium: 0.2,           // Medium (20%)
    moderate: 0.3,         // Moderate (30%)
    strong: 0.5,           // Strong (50%)
    intense: 0.7,          // Intense (70%)
    opaque: 0.9,           // Nearly opaque (90%)
    full: 1,               // Fully opaque
) !default;

// ============================================================================
// HELPER FUNCTIONS
// ============================================================================
// Utility functions to retrieve color values from the maps above.
// ============================================================================

// Get a theme color value
// @param {String} $color - Color name from $theme-colors map
// @return {Color} - HSL color value
// @example scss
//   background-color: theme-color(primary);
@function theme-color($color) {
    @return map.get($theme-colors, $color);
}

// Get a brand color value with optional variant
// @param {String} $brand - Brand name (github, linkedin, etc.)
// @param {String} $variant - Optional variant (light, dark, hover, etc.)
// @return {Color} - Color value
// @example scss
//   color: brand-color(github);              // #181717
//   color: brand-color(github, hover);       // hsl(0 0% 90%)
@function brand-color($brand, $variant: null) {
    $color: map.get($brand-colors, $brand);

    // If it's a simple color (not a map), return it directly
    @if meta.type-of($color) != "map" {
        @return $color;
    }

    // If it's a map and variant is provided, get the specific variant
    @if $variant {
        @return map.get($color, $variant);
    }

    // Default to 'default' variant if no variant specified
    @return map.get($color, default);
}

// Get an opacity value
// @param {String} $level - Opacity level name
// @return {Number} - Opacity value (0-1)
// @example scss
//   opacity: opacity(subtle);        // 0.05
@function opacity($level) {
    @return map.get($opacity-levels, $level);
}

// Create an alpha version of a CSS custom property color
// @param {String} $var - CSS custom property name (without --)
// @param {Number} $alpha - Alpha value (0-1)
// @return {String} - HSLA color string
// @example scss
//   background-color: alpha-color(primary, 0.5); // hsla(var(--primary), 0.5)
@function alpha-color($var, $alpha: 1) {
    @return hsla(var(--#{$var}), $alpha);
}

// Helper to apply theme color with custom opacity
// @param {String} $color - Theme color name
// @param {Number} $alpha - Alpha value (0-1)
// @return {String} - Color with opacity
// @example scss
//   background-color: theme-alpha(primary, 0.8);
@function theme-alpha($color, $alpha: 1) {
    // Extract the CSS var name from the theme color
    @if $color == background { @return alpha-color(background, $alpha); }
    @if $color == foreground { @return alpha-color(foreground, $alpha); }
    @if $color == primary { @return alpha-color(primary, $alpha); }
    @if $color == secondary { @return alpha-color(secondary, $alpha); }
    @if $color == accent { @return alpha-color(accent, $alpha); }
    @if $color == muted { @return alpha-color(muted, $alpha); }
    @if $color == destructive { @return alpha-color(destructive, $alpha); }
    @if $color == card { @return alpha-color(card, $alpha); }
    @if $color == border { @return alpha-color(border, $alpha); }

    // Fallback
    @return theme-color($color);
}
